<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DVIDS DAILY DIGEST - U.S. Navy News</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0f; color: #e0e0e0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; min-height: 100vh; }

        /* Header */
        .header { background: linear-gradient(180deg, #111118 0%, #0a0a0f 100%); border-bottom: 1px solid #1e1e2e; padding: 16px 24px; position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
        .header-left { display: flex; align-items: center; gap: 20px; }
        .logo { font-size: 18px; font-weight: 700; color: #00ff88; letter-spacing: 1px; }
        .logo-sub { font-size: 10px; font-weight: 500; color: #666; letter-spacing: 2px; margin-top: 2px; text-transform: uppercase; }
        .stats-bar { display: flex; gap: 24px; flex-wrap: wrap; }
        .stat { text-align: center; padding: 8px 16px; background: rgba(255,255,255,0.02); border-radius: 8px; }
        .stat-value { font-size: 24px; font-weight: 700; }
        .stat-value.total { color: #00ffff; }
        .stat-value.news { color: #ff6b6b; }
        .stat-value.image { color: #4ecdc4; }
        .stat-value.video { color: #ffd93d; }
        .stat-label { font-size: 9px; font-weight: 600; color: #555; letter-spacing: 1px; text-transform: uppercase; margin-top: 2px; }
        .timestamp { font-size: 11px; color: #444; font-weight: 500; }
        .timestamp span { color: #00ff88; }

        /* Main Layout */
        .main-container { max-width: 1400px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 280px 1fr; gap: 20px; }

        /* Sidebar */
        .sidebar { background: #0d0d14; border: 1px solid #1e1e2e; border-radius: 12px; padding: 16px; height: fit-content; position: sticky; top: 100px; }
        .sidebar-title { font-size: 11px; font-weight: 600; color: #00ff88; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 16px; }
        .filter-section { margin-bottom: 20px; }
        .filter-label { font-size: 10px; font-weight: 600; color: #666; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 8px; }
        .filter-group { display: flex; flex-direction: column; gap: 6px; }
        .filter-btn { font-family: 'Inter', sans-serif; font-size: 11px; font-weight: 500; padding: 8px 12px; background: transparent; border: 1px solid #2a2a3a; color: #888; cursor: pointer; border-radius: 6px; transition: all 0.15s; text-align: left; display: flex; justify-content: space-between; align-items: center; }
        .filter-btn:hover { border-color: #444; color: #ccc; }
        .filter-btn.active { background: rgba(0, 255, 136, 0.1); border-color: #00ff88; color: #00ff88; }
        .filter-count { font-size: 10px; color: #555; }
        .filter-btn.active .filter-count { color: #00ff88; }

        /* Search */
        .search-box { margin-bottom: 16px; }
        .search-input { width: 100%; padding: 10px 12px; background: rgba(255,255,255,0.02); border: 1px solid #2a2a3a; border-radius: 8px; color: #e0e0e0; font-family: 'Inter', sans-serif; font-size: 12px; }
        .search-input:focus { outline: none; border-color: #00ff88; }
        .search-input::placeholder { color: #555; }

        /* Content Area */
        .content-area { min-height: 80vh; }
        .content-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .results-count { font-size: 12px; color: #888; }
        .view-toggle { display: flex; gap: 4px; }
        .view-btn { font-family: 'Inter', sans-serif; font-size: 11px; padding: 6px 12px; background: transparent; border: 1px solid #2a2a3a; color: #666; cursor: pointer; border-radius: 6px; }
        .view-btn.active { background: rgba(0, 255, 136, 0.1); border-color: #00ff88; color: #00ff88; }

        /* Location Groups */
        .location-group { margin-bottom: 24px; }
        .location-header { display: flex; align-items: center; gap: 10px; padding: 12px 16px; background: rgba(0, 255, 136, 0.05); border-radius: 10px; margin-bottom: 12px; cursor: pointer; }
        .location-header:hover { background: rgba(0, 255, 136, 0.08); }
        .region-badge { font-size: 9px; font-weight: 600; color: #00ffff; background: rgba(0, 255, 255, 0.1); padding: 3px 8px; border-radius: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        .location-name { flex: 1; font-size: 14px; font-weight: 600; color: #00ff88; }
        .location-count { font-size: 11px; font-weight: 600; color: #888; background: rgba(255,255,255,0.05); padding: 4px 10px; border-radius: 12px; }

        /* Item Cards */
        .items-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px; padding-left: 12px; }
        .item-card { background: rgba(255, 255, 255, 0.02); border: 1px solid #1e1e2e; border-radius: 12px; overflow: hidden; transition: all 0.2s; cursor: pointer; }
        .item-card:hover { border-color: #333; background: rgba(255, 255, 255, 0.04); transform: translateY(-2px); }
        .item-card.news { border-left: 4px solid #ff6b6b; }
        .item-card.image { border-left: 4px solid #4ecdc4; }
        .item-card.video { border-left: 4px solid #ffd93d; }

        .item-thumbnail { width: 100%; height: 160px; object-fit: cover; background: #1a1a2e; }
        .item-content { padding: 14px 16px; }
        .item-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .item-type { font-size: 9px; font-weight: 600; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        .item-type.news { background: rgba(255, 107, 107, 0.15); color: #ff6b6b; }
        .item-type.image { background: rgba(78, 205, 196, 0.15); color: #4ecdc4; }
        .item-type.video { background: rgba(255, 217, 61, 0.15); color: #ffd93d; }
        .item-branch { font-size: 10px; color: #666; font-weight: 500; }
        .item-title { font-size: 14px; font-weight: 600; color: #fff; line-height: 1.4; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .item-description { font-size: 12px; color: #888; line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; margin-bottom: 10px; }
        .item-footer { display: flex; justify-content: space-between; align-items: center; }
        .item-unit { font-size: 10px; color: #555; max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-date { font-size: 10px; color: #444; }

        /* List View */
        .items-list { display: flex; flex-direction: column; gap: 8px; padding-left: 12px; }
        .item-row { display: flex; align-items: center; gap: 16px; background: rgba(255, 255, 255, 0.02); border: 1px solid #1e1e2e; border-radius: 8px; padding: 12px 16px; cursor: pointer; transition: all 0.15s; }
        .item-row:hover { border-color: #333; background: rgba(255, 255, 255, 0.04); }
        .item-row.news { border-left: 3px solid #ff6b6b; }
        .item-row.image { border-left: 3px solid #4ecdc4; }
        .item-row.video { border-left: 3px solid #ffd93d; }
        .item-row-type { width: 60px; flex-shrink: 0; }
        .item-row-main { flex: 1; min-width: 0; }
        .item-row-title { font-size: 13px; font-weight: 600; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-row-unit { font-size: 11px; color: #666; margin-top: 2px; }
        .item-row-meta { display: flex; gap: 16px; flex-shrink: 0; text-align: right; }
        .item-row-branch { font-size: 10px; color: #888; }
        .item-row-date { font-size: 10px; color: #555; }

        /* Detail Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; padding: 20px; }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal { background: #111118; border: 1px solid #2a2a3a; border-radius: 16px; width: 100%; max-width: 800px; max-height: 90vh; overflow: hidden; transform: scale(0.9); transition: transform 0.3s ease; }
        .modal-overlay.visible .modal { transform: scale(1); }
        .modal-header { padding: 20px 24px; border-bottom: 1px solid #1e1e2e; display: flex; justify-content: space-between; align-items: flex-start; }
        .modal-title { font-size: 18px; font-weight: 700; color: #fff; line-height: 1.4; flex: 1; padding-right: 16px; }
        .modal-close { cursor: pointer; color: #555; font-size: 28px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px; flex-shrink: 0; }
        .modal-close:hover { color: #ff6b6b; background: rgba(255, 107, 107, 0.1); }
        .modal-body { padding: 24px; overflow-y: auto; max-height: calc(90vh - 180px); }
        .modal-image { width: 100%; max-height: 400px; object-fit: contain; background: #0a0a0f; border-radius: 8px; margin-bottom: 20px; }
        .modal-meta { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 20px; }
        .modal-tag { font-size: 11px; font-weight: 500; padding: 6px 12px; border-radius: 6px; background: rgba(255,255,255,0.05); color: #888; }
        .modal-tag.type { color: #00ffff; background: rgba(0, 255, 255, 0.1); }
        .modal-tag.branch { color: #ff6b6b; background: rgba(255, 107, 107, 0.1); }
        .modal-tag.location { color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .modal-description { font-size: 14px; color: #ccc; line-height: 1.7; margin-bottom: 20px; }
        .modal-info { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
        .modal-info-item { background: rgba(255,255,255,0.02); padding: 12px; border-radius: 8px; }
        .modal-info-label { font-size: 10px; font-weight: 600; color: #555; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; }
        .modal-info-value { font-size: 13px; color: #aaa; }
        .modal-footer { padding: 16px 24px; border-top: 1px solid #1e1e2e; display: flex; justify-content: flex-end; gap: 12px; }
        .modal-btn { font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 600; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; transition: all 0.15s; }
        .modal-btn.primary { background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%); color: #000; }
        .modal-btn.primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3); }

        /* Empty State */
        .empty-state { text-align: center; padding: 60px 20px; color: #555; }
        .empty-state-icon { font-size: 48px; margin-bottom: 16px; }
        .empty-state-title { font-size: 18px; font-weight: 600; color: #888; margin-bottom: 8px; }
        .empty-state-text { font-size: 13px; }

        /* Attribution */
        .attribution { text-align: center; padding: 24px; font-size: 10px; color: #444; }

        /* Mobile Responsive */
        @media (max-width: 900px) {
            .main-container { grid-template-columns: 1fr; }
            .sidebar { position: static; }
            .header-content { flex-direction: column; align-items: flex-start; }
            .stats-bar { width: 100%; justify-content: space-between; }
        }

        @media (max-width: 600px) {
            .items-grid { grid-template-columns: 1fr; }
            .modal { border-radius: 16px 16px 0 0; max-height: 95vh; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <div>
                    <div class="logo">DVIDS DAILY DIGEST</div>
                    <div class="logo-sub">U.S. Navy &amp; Marine Corps News</div>
                </div>
            </div>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value total">29</div>
                    <div class="stat-label">Total Items</div>
                </div>
                <div class="stat">
                    <div class="stat-value news">13</div>
                    <div class="stat-label">News</div>
                </div>
                <div class="stat">
                    <div class="stat-value image">15</div>
                    <div class="stat-label">Images</div>
                </div>
                <div class="stat">
                    <div class="stat-value video">1</div>
                    <div class="stat-label">Videos</div>
                </div>
            </div>
            <div class="timestamp">
                Last Update: <span>2026-01-30 18:24 UTC</span>
            </div>
        </div>
    </header>

    <div class="main-container">
        <aside class="sidebar">
            <div class="sidebar-title">Filters</div>

            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="Search titles, units..." oninput="filterItems()">
            </div>

            <div class="filter-section">
                <div class="filter-label">Content Type</div>
                <div class="filter-group" id="typeFilters"></div>
            </div>

            <div class="filter-section">
                <div class="filter-label">Branch</div>
                <div class="filter-group" id="branchFilters"></div>
            </div>

            <div class="filter-section">
                <div class="filter-label">Country</div>
                <div class="filter-group" id="countryFilters"></div>
            </div>
        </aside>

        <main class="content-area">
            <div class="content-header">
                <div class="results-count" id="resultsCount">Showing 29 items</div>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid" onclick="setView('grid')">Grid</button>
                    <button class="view-btn" data-view="list" onclick="setView('list')">List</button>
                </div>
            </div>
            <div id="contentContainer"></div>
        </main>
    </div>

    <div class="attribution">
        Created by @ianellisjones and IEJ Media | Data from DVIDS (dvidshub.net)
    </div>

    <div class="modal-overlay" id="detailModal" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">-</div>
                <span class="modal-close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer">
                <a id="modalLink" href="#" target="_blank" rel="noopener">
                    <button class="modal-btn primary">View on DVIDS</button>
                </a>
            </div>
        </div>
    </div>

    <script>
        const allItems = [{"id": "news:557199", "title": "NAS Pensacola Participates in Annual Navy Force Protection Exercise", "description": "Naval Air Station (NAS) Pensacola is participating in an annual force\nprotection exercise Jan. 26 through Feb. 6.", "type": "news", "branch": "Navy", "unit_name": "Naval Air Station Pensacola", "date_published": "Jan 30, 2026 18:23 UTC", "timestamp": "2026-01-30T18:23:39+00:00", "country": "United States", "state": "Florida", "city": "Pensacola", "location_display": "Pensacola, Florida, United States", "url": "https://www.dvidshub.net/news/557199/nas-pensacola-participates-annual-navy-force-protection-exercise", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500738/122x92_q95.jpg", "keywords": ["cnrse", "navy-readiness", "citadelshield", "solid---curtain", "cnic"], "credit": "Garrett Dipuma", "duration": "", "aspect_ratio": ""}, {"id": "news:557198", "title": "Topping Out Ceremony Marks Investment in Future of Submarine Readiness", "description": "A topping out ceremony was held at Naval Submarine Base Kings Bay on Jan. 29 to mark a major construction milestone for the new Nuclear Regional Maintenance Department facility. Hosted by Naval Facilities Engineering Systems Command (NAVFAC) Southeast, the event celebrated the placement of the final, signed steel beam, completing the building's structural phase just over a year after breaking ground. Lauded by leaders as a critical investment in the nation\u2019s strategic deterrence, the project has...", "type": "news", "branch": "Navy", "unit_name": "Naval Facilities Engineering Systems Command Southeast", "date_published": "Jan 30, 2026 18:20 UTC", "timestamp": "2026-01-30T18:20:46+00:00", "country": "United States", "state": "Georgia", "city": "Kings Bay", "location_display": "Kings Bay, Georgia, United States", "url": "https://www.dvidshub.net/news/557198/topping-out-ceremony-marks-investment-future-submarine-readiness", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500675/122x92_q95.jpg", "keywords": ["NAVFAC", "Naval Submarine Base Kings Bay", "NAVFAC Southeast", "Topping Out Ceremony", "NRMD-KB"], "credit": "Jeffrey Hamlin", "duration": "", "aspect_ratio": ""}, {"id": "image:9500703", "title": "Topping Out Ceremony Marks Investment in Future of Submarine Readiness", "description": "The final steel beam, signed by project personnel, sits...", "type": "image", "branch": "Navy", "unit_name": "Naval Facilities Engineering Systems Command Southeast", "date_published": "Jan 30, 2026 18:19 UTC", "timestamp": "2026-01-30T18:19:23+00:00", "country": "United States", "state": "Georgia", "city": "Kings Bay", "location_display": "Kings Bay, Georgia, United States", "url": "https://www.dvidshub.net/image/9500703/topping-out-ceremony-marks-investment-future-submarine-readiness", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500703/122x92_q95.jpg", "keywords": [], "credit": "Yan Kennon", "duration": "", "aspect_ratio": "landscape"}, {"id": "news:557179", "title": "Project Launched to Recover Rare World War II Aircraft", "description": "Washington Navy Yard, Washington, D.C. -\u202fA multidisciplinary team of maritime and naval conservation organizations have announced the launch \u201cThe Devastator Project\u201d, an effort to recover and preserve a rare World War II torpedo bomber, the Douglas TBD-1 Devastator.", "type": "news", "branch": "Navy", "unit_name": "Naval History and Heritage Command", "date_published": "Jan 30, 2026 18:14 UTC", "timestamp": "2026-01-30T18:14:23+00:00", "country": "United States", "state": "District of Columbia", "city": "", "location_display": "District of Columbia, United States", "url": "https://www.dvidshub.net/news/557179/project-launched-recover-rare-world-war-ii-aircraft", "thumbnail_url": "", "keywords": ["Naval History", "NHHC", "Underwater Archeology", "WWII", "TBD-1 Devastator"], "credit": "SSgt Bryce Hodges", "duration": "", "aspect_ratio": ""}, {"id": "image:9500352", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1007 Jacksonville, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:03+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500352/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500352/122x92_q95.jpg", "keywords": ["Navy medicine", "Years of Service award", "acrossthemhs", "award", "civilian"], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500344", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1006 Jacksonville, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:03+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500344/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500344/122x92_q95.jpg", "keywords": ["Navy medicine", "End of Tour Award", "acrossthemhs", "award", "cpo"], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500336", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1005 Jacksonville, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:02+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500336/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500336/122x92_q95.jpg", "keywords": ["Navy medicine", "joint service", "acrossthemhs", "award"], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500326", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1004 JACKSONVILLE, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:02+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500326/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500326/122x92_q95.jpg", "keywords": ["frocking", "Navy medicine", "EMF-M", "acrossthemhs", "award"], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500321", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1003 JACKSONVILLE, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:02+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500321/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500321/122x92_q95.jpg", "keywords": [], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "portrait"}, {"id": "image:9500317", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1002 JACKSONVILLE, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:01+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500317/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500317/122x92_q95.jpg", "keywords": [], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500313", "title": "Awards Ceremony at Naval Hospital Jacksonville \u2013 Jan. 30, 2026", "description": "260130-N-ME175-1001 JACKSONVILLE, FL. (Jan. 30, 2026)...", "type": "image", "branch": "Joint", "unit_name": "Naval Hospital Jacksonville", "date_published": "Jan 30, 2026 18:13 UTC", "timestamp": "2026-01-30T18:13:01+00:00", "country": "United States", "state": "Florida", "city": "Jacksonville", "location_display": "Jacksonville, Florida, United States", "url": "https://www.dvidshub.net/image/9500313/awards-ceremony-naval-hospital-jacksonville-jan-30-2026", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500313/122x92_q95.jpg", "keywords": ["frocking", "acrossthemhs", "Awards", "nhjax"], "credit": "Julie Lucas", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500554", "title": "Weekly SITREP", "description": "Pentagon Press Secretary Kingsley Wilson delivers...", "type": "image", "branch": "Joint", "unit_name": "Office of the Secretary of War Public Affairs", "date_published": "Jan 30, 2026 17:26 UTC", "timestamp": "2026-01-30T17:26:47+00:00", "country": "United States", "state": "District of Columbia", "city": "District of Columbia", "location_display": "District of Columbia, District of Columbia, United States", "url": "https://www.dvidshub.net/image/9500554/weekly-sitrep", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500554/122x92_q95.jpg", "keywords": ["Wilson", "Pentagon Press Secretary"], "credit": "PO1 Eric Brann", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500552", "title": "Weekly SITREP", "description": "Pentagon Press Secretary Kingsley Wilson delivers...", "type": "image", "branch": "Joint", "unit_name": "Office of the Secretary of War Public Affairs", "date_published": "Jan 30, 2026 17:26 UTC", "timestamp": "2026-01-30T17:26:47+00:00", "country": "United States", "state": "District of Columbia", "city": "District of Columbia", "location_display": "District of Columbia, District of Columbia, United States", "url": "https://www.dvidshub.net/image/9500552/weekly-sitrep", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500552/122x92_q95.jpg", "keywords": ["Wilson", "Pentagon Press Secretary"], "credit": "PO1 Eric Brann", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500551", "title": "Weekly SITREP", "description": "Pentagon Press Secretary Kingsley Wilson delivers...", "type": "image", "branch": "Joint", "unit_name": "Office of the Secretary of War Public Affairs", "date_published": "Jan 30, 2026 17:26 UTC", "timestamp": "2026-01-30T17:26:47+00:00", "country": "United States", "state": "District of Columbia", "city": "District of Columbia", "location_display": "District of Columbia, District of Columbia, United States", "url": "https://www.dvidshub.net/image/9500551/weekly-sitrep", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500551/122x92_q95.jpg", "keywords": ["Wilson", "Pentagon Press Secretary"], "credit": "PO1 Eric Brann", "duration": "", "aspect_ratio": "landscape"}, {"id": "news:557185", "title": "From the Chiefs Mess to the Wardroom: SWESC BMC commissions to CWO2", "description": "NAVAL STATION GREAT LAKES, Ill. (January 29, 2026) \u2013 Chief Boatswain\u2019s Mate Rogelio Maga\u00f1a, a native of East Los Angeles, Calif., commissioned to the rank of Chief Warrant Officer 2 during a commissioning ceremony, Jan. 23, at Surface Warfare Engineering School Command (SWESC) Great Lakes\u2019 USS Whitehat Boatswain\u2019s Mate Schoolhouse.", "type": "news", "branch": "Navy", "unit_name": "Surface Warfare Schools Command", "date_published": "Jan 30, 2026 16:47 UTC", "timestamp": "2026-01-30T16:47:21+00:00", "country": "United States", "state": "Illinois", "city": "", "location_display": "Illinois, United States", "url": "https://www.dvidshub.net/news/557185/chiefs-mess-wardroom-swesc-bmc-commissions-cwo2", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9490406/122x92_q95.jpg", "keywords": ["swsc", "netc", "surface-warfare-schools-command", "swesc-great-lakes"], "credit": "PO1 Brian Glunt", "duration": "", "aspect_ratio": ""}, {"id": "news:557184", "title": "MSC Chartered Ship Completes Fuel Delivery for Operation Deep Freeze 2026", "description": "Near the South Pole, Military Sealift Command (MSC) chartered ship MT Stena Polaris (T-AOT 5563) has completed the delivery of fuel to McMurdo Station, Antarctica. The operation is part of MSC\u2019s annual resupply mission in support of Operation Deep Freeze 2026 (ODF), the Joint Task Force Support for Antarctica mission to resupply the remote scientific outpost.", "type": "news", "branch": "Navy", "unit_name": "Military Sealift Command Pacific", "date_published": "Jan 30, 2026 16:23 UTC", "timestamp": "2026-01-30T16:23:02+00:00", "country": "United States", "state": "", "city": "", "location_display": "United States", "url": "https://www.dvidshub.net/news/557184/msc-chartered-ship-completes-fuel-delivery-operation-deep-freeze-2026", "thumbnail_url": "", "keywords": ["Military Sealift Command", "MSC", "United We Sail", "Operation Deep Freeze 2026", "ODF 2026"], "credit": "Sarah Cannon", "duration": "", "aspect_ratio": ""}, {"id": "video:994451", "title": "Devastator Project", "description": "A multidisciplinary team of maritime and naval conservation organizations have announce the launch \u201cThe Devastator Project\u201d, an effort to recover and preserve a rare World War II torpedo bomber, the Douglas TBD-1 Devastator. The project brings together the Air/Sea Heritage Foundation, Texas A&M University\u2019s Center for Maritime Archaeology and Conservation, the Republic of the Marshall Islands Cultural and Historic Preservation Office, Jaluit Atoll local government officials and traditional leade...", "type": "video", "branch": "Navy", "unit_name": "Naval History and Heritage Command", "date_published": "Jan 30, 2026 15:41 UTC", "timestamp": "2026-01-30T15:41:39+00:00", "country": "United States", "state": "District of Columbia", "city": "Washington Navy Yard", "location_display": "Washington Navy Yard, District of Columbia, United States", "url": "https://www.dvidshub.net/video/994451/devastator-project", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/frames/video/2601/994451/DOD_111503129.0000013/122x92_q95.jpg", "keywords": ["NHHC", "Naval History", "Naval Aviation", "WWII", "TBD-1 Devastator", "Underwater Archeology"], "credit": "SSgt Bryce Hodges", "duration": 127, "aspect_ratio": "16:9"}, {"id": "news:557177", "title": "NAVSUP Business Systems Center Installs Hazardous Material Inventory Control System 4 Aboard USS Comstock and USS Boxer", "description": "MECHANICSBURG, Pa. -- Information technology (IT) specialists from Naval Supply Systems Command (NAVSUP) Business Systems Center (BSC) completed installation of the Hazardous Material Inventory Control System 4 (HICS 4) aboard Whidbey Island-class dock landing ship USS Comstock (LSD 45) and Wasp-class amphibious assault ship USS Boxer (LHD 4), January 9, in San Diego, Calif.", "type": "news", "branch": "Navy", "unit_name": "NAVSUP Business Systems Center", "date_published": "Jan 30, 2026 15:29 UTC", "timestamp": "2026-01-30T15:29:50+00:00", "country": "United States", "state": "Pennsylvania", "city": "Mechanicsburg", "location_display": "Mechanicsburg, Pennsylvania, United States", "url": "https://www.dvidshub.net/news/557177/navsup-business-systems-center-installs-hazardous-material-inventory-control-system-4-aboard-uss-comstock-and-uss-boxer", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2502/8856557/122x92_q95.jpg", "keywords": [], "credit": "James Foehl", "duration": "", "aspect_ratio": ""}, {"id": "news:557175", "title": "Silver Caduceus Society builds Medical Service Corps leaders at Fort Polk", "description": "FORT POLK, La. \u2014 The Fort Polk Silver Caduceus Society held its first formal professional development gathering of 2026 on Jan. 28, bringing together Medical Service Corps officers to strengthen leadership, professional growth and cross-discipline collaboration across the installation.", "type": "news", "branch": "Joint", "unit_name": "Bayne-Jones Army Community Hospital", "date_published": "Jan 30, 2026 15:24 UTC", "timestamp": "2026-01-30T15:24:32+00:00", "country": "United States", "state": "Louisiana", "city": "Leesville", "location_display": "Leesville, Louisiana, United States", "url": "https://www.dvidshub.net/news/557175/silver-caduceus-society-builds-medical-service-corps-leaders-fort-polk", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500129/122x92_q95.jpg", "keywords": ["Fort Polk", "Joint Readiness Training Center", "Army Medicine", "Medical Service Corps (MSC)", "BJACH", "SILVER CADUCEUS SOCIETY"], "credit": "Jean Graves", "duration": "", "aspect_ratio": ""}, {"id": "news:557174", "title": "Pa. Guard Soldiers conduct UAS demo for senior Army official", "description": "Two Pennsylvania National Guard Soldiers supported an unmanned aircraft systems demonstration for a senior Army official recently at U.S. Army Combat Capabilities Development Command at Picatinny Arsenal, New Jersey.", "type": "news", "branch": "Joint", "unit_name": "Joint Force Headquarters - Pennsylvania National Guard", "date_published": "Jan 30, 2026 15:10 UTC", "timestamp": "2026-01-30T15:10:35+00:00", "country": "United States", "state": "Pennsylvania", "city": "Fort Indiantown Gap", "location_display": "Fort Indiantown Gap, Pennsylvania, United States", "url": "https://www.dvidshub.net/news/557174/pa-guard-soldiers-conduct-uas-demo-senior-army-official", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500103/122x92_q95.jpg", "keywords": ["Unmanned Aircraft Systems", "DEVCOM", "UAS", "Pennsylvania National Guard"], "credit": "Brad Rhen", "duration": "", "aspect_ratio": ""}, {"id": "image:9500073", "title": "A Career of Commitment: 37 Years of Excellence at FRCSW", "description": "For more than 36 years Fleet Readiness Center Southwest...", "type": "image", "branch": "Navy", "unit_name": "Fleet Readiness Center Southwest", "date_published": "Jan 30, 2026 14:38 UTC", "timestamp": "2026-01-30T14:38:07+00:00", "country": "United States", "state": "California", "city": "San Diego", "location_display": "San Diego, California, United States", "url": "https://www.dvidshub.net/image/9500073/career-commitment-37-years-excellence-frcsw", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500073/122x92_q95.jpg", "keywords": [], "credit": "Michael A Furlano", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9500071", "title": "A Career of Commitment: 37 Years of Excellence at FRCSW", "description": "For more than 36 years Fleet Readiness Center Southwest...", "type": "image", "branch": "Navy", "unit_name": "Fleet Readiness Center Southwest", "date_published": "Jan 30, 2026 14:38 UTC", "timestamp": "2026-01-30T14:38:07+00:00", "country": "United States", "state": "California", "city": "San Diego", "location_display": "San Diego, California, United States", "url": "https://www.dvidshub.net/image/9500071/career-commitment-37-years-excellence-frcsw", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500071/122x92_q95.jpg", "keywords": [], "credit": "Michael A Furlano", "duration": "", "aspect_ratio": "portrait"}, {"id": "news:557171", "title": "A Career of Commitment: 37 Years of Excellence at FRCSW", "description": "For more than 36 years Fleet Readiness Center Southwest (FRCSW) accountant, Paula Stauffer, has been a cornerstone of financial excellence at the command. Spending just about her entire federal career...", "type": "news", "branch": "Navy", "unit_name": "Fleet Readiness Center Southwest", "date_published": "Jan 30, 2026 14:38 UTC", "timestamp": "2026-01-30T14:38:06+00:00", "country": "United States", "state": "California", "city": "San Diego", "location_display": "San Diego, California, United States", "url": "https://www.dvidshub.net/news/557171/career-commitment-37-years-excellence-frcsw", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9500071/122x92_q95.jpg", "keywords": [], "credit": "Michael A Furlano", "duration": "", "aspect_ratio": ""}, {"id": "image:9498931", "title": "Service members conduct patrols in metro stops", "description": "U.S. Army Sgt. 1st Class Brandon Gomez, West Virginia...", "type": "image", "branch": "Joint", "unit_name": "Joint Task Force DC", "date_published": "Jan 30, 2026 13:48 UTC", "timestamp": "2026-01-30T13:48:00+00:00", "country": "United States", "state": "", "city": "", "location_display": "United States", "url": "https://www.dvidshub.net/image/9498931/service-members-conduct-patrols-metro-stops", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9498931/122x92_q95.jpg", "keywords": ["JTF-DC", "National Guard", "DC Safe"], "credit": "SMSgt Jeremy Farson", "duration": "", "aspect_ratio": "landscape"}, {"id": "image:9499687", "title": "11th MEU\u202fMarines, Sailors\u202fConduct Helo Raid on Marine Corps Logistics Base Barstow", "description": "U.S. Marines with India Company, Battalion Landing Team...", "type": "image", "branch": "Marines", "unit_name": "11th Marine Expeditionary Unit", "date_published": "Jan 30, 2026 07:17 UTC", "timestamp": "2026-01-30T07:17:03+00:00", "country": "United States", "state": "", "city": "", "location_display": "United States", "url": "https://www.dvidshub.net/image/9499687/11th-meu-marines-sailors-conduct-helo-raid-marine-corps-logistics-base-barstow", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9499687/122x92_q95.jpg", "keywords": ["BLT 3/5", "Blue-Green Team", "Pride of the Pacific", "Marines", "Sailors", "Desert"], "credit": "Cpl Oliver Nisbet", "duration": "", "aspect_ratio": "landscape"}, {"id": "news:557134", "title": "NAVFAC EXWC\u2019s Geothermal Experts Advance Energy Resilience for DoN, DoW", "description": "The Navy\u2019s Geothermal Program Office (GPO), a unique office of Naval Facilities Engineering and Expeditionary Warfare Center (NAVFAC EXWC), develops and maximizes utilization of geothermal resources to benefit Department of the Navy and the Department of War (DoW) readiness.", "type": "news", "branch": "Navy", "unit_name": "Naval Facilities Engineering and Expeditionary Warfare Center", "date_published": "Jan 30, 2026 00:25 UTC", "timestamp": "2026-01-30T00:25:01+00:00", "country": "United States", "state": "California", "city": "", "location_display": "California, United States", "url": "https://www.dvidshub.net/news/557134/navfac-exwcs-geothermal-experts-advance-energy-resilience-don-dow", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9499272/122x92_q95.jpg", "keywords": ["NAVFAC", "geothermal", "NAVFAC EXWC", "geothermal program office"], "credit": "CPO Lisa Ferdinando", "duration": "", "aspect_ratio": ""}, {"id": "news:557127", "title": "Colorado National Guard Child and Youth Program bursting with new opportunities", "description": "The Colorado National Guard\u2019s Child and Youth Program provides year-round engaging programming for school-age children of military families.", "type": "news", "branch": "Joint", "unit_name": "Colorado National Guard", "date_published": "Jan 29, 2026 22:41 UTC", "timestamp": "2026-01-29T22:41:08+00:00", "country": "United States", "state": "Colorado", "city": "", "location_display": "Colorado, United States", "url": "https://www.dvidshub.net/news/557127/colorado-national-guard-child-and-youth-program-bursting-with-new-opportunities", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9499070/122x92_q95.jpg", "keywords": ["National Guard Bureau", "CONG", "Family", "National Guard", "Kids"], "credit": "SFC Joseph VonNida", "duration": "", "aspect_ratio": ""}, {"id": "news:557119", "title": "Ready, Exercise: MCB Camp Pendleton Conducts CPX II, a Hazardous Materials Training Exercise", "description": "Semper Durus is an annual interagency training exercise designed to strengthen regional defense, test anti-terrorism measures, and ensure personnel safety against evolving threats across Marine Corps Base Camp Pendleton. Before, during, and after Semper Durus, agencies aboard the installation maintain readiness and response effectiveness through targeted training exercises focused on specific areas.  \n\nWith the focus on response effectiveness, partnering agencies across the installation particip...", "type": "news", "branch": "Marines", "unit_name": "Marine Corps Base Camp Pendleton", "date_published": "Jan 29, 2026 21:59 UTC", "timestamp": "2026-01-29T21:59:29+00:00", "country": "United States", "state": "California", "city": "Camp Pendleton", "location_display": "Camp Pendleton, California, United States", "url": "https://www.dvidshub.net/news/557119/ready-exercise-mcb-camp-pendleton-conducts-cpx-ii-hazardous-materials-training-exercise", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9498991/122x92_q95.jpg", "keywords": ["MCIWEST", "Marines", "USMC", "Camp Pendleton", "Fire Department", "Hazmat"], "credit": "Cpl Jacqueline Akamelu", "duration": "", "aspect_ratio": ""}, {"id": "news:557074", "title": "Army & Air Force Exchange Service Stores to Remain Open During Government Shutdown", "description": "@shopmyexchange PXs, BXs and ShopMyExchange.com will remain open if the government shuts down. Read more: https://wp.me/p9Q7PG-39z", "type": "news", "branch": "Joint", "unit_name": "Army & Air Force Exchange Service HQ", "date_published": "Jan 29, 2026 19:16 UTC", "timestamp": "2026-01-29T19:16:02+00:00", "country": "United States", "state": "", "city": "", "location_display": "United States", "url": "https://www.dvidshub.net/news/557074/army-air-force-exchange-service-stores-remain-open-during-government-shutdown", "thumbnail_url": "https://d1ldvf68ux039x.cloudfront.net/thumbs/photos/2601/9498686/122x92_q95.jpg", "keywords": ["Exchange", "aafes", "Army & Air Force Exchange Service"], "credit": "Zachary Wright", "duration": "", "aspect_ratio": ""}];
        const byCountry = {"United States": 29};
        const byType = {"news": 13, "image": 15, "video": 1};
        const byBranch = {"Navy": 12, "Joint": 15, "Marines": 2};

        // Region mapping
        const regionMap = {"United States": "CONUS", "Puerto Rico": "Caribbean", "U.S. Virgin Islands": "Caribbean", "Cuba (Guantanamo Bay)": "Caribbean", "Guam": "Indo-Pacific", "Japan": "Indo-Pacific", "South Korea": "Indo-Pacific", "Philippines": "Indo-Pacific", "Australia": "Indo-Pacific", "Singapore": "Indo-Pacific", "Thailand": "Indo-Pacific", "Vietnam": "Indo-Pacific", "India": "Indo-Pacific", "Germany": "Europe", "Italy": "Europe", "Spain": "Europe", "United Kingdom": "Europe", "Greece": "Europe", "Turkey": "Europe", "Poland": "Europe", "Norway": "Europe", "Sweden": "Europe", "Finland": "Europe", "Iceland": "Europe", "Bahrain": "Middle East", "United Arab Emirates": "Middle East", "Qatar": "Middle East", "Kuwait": "Middle East", "Saudi Arabia": "Middle East", "Oman": "Middle East", "Iraq": "Middle East", "Syria": "Middle East", "Jordan": "Middle East", "Israel": "Middle East", "Egypt": "Middle East", "Yemen": "Middle East", "Djibouti": "Africa", "Afghanistan": "Central Asia", "Pakistan": "Central Asia", "Canada": "North America", "Mexico": "Central America"};

        let currentFilters = {
            type: 'all',
            branch: 'all',
            country: 'all',
            search: ''
        };
        let currentView = 'grid';

        // Initialize filters
        function initFilters() {
            // Type filters
            const typeContainer = document.getElementById('typeFilters');
            typeContainer.innerHTML = '<button class="filter-btn active" data-type="all" onclick="setTypeFilter(\'all\')">All Types <span class="filter-count">29</span></button>';
            Object.entries(byType).sort((a, b) => b[1] - a[1]).forEach(([type, count]) => {
                typeContainer.innerHTML += `<button class="filter-btn" data-type="${type}" onclick="setTypeFilter('${type}')">${type.charAt(0).toUpperCase() + type.slice(1)} <span class="filter-count">${count}</span></button>`;
            });

            // Branch filters
            const branchContainer = document.getElementById('branchFilters');
            branchContainer.innerHTML = '<button class="filter-btn active" data-branch="all" onclick="setBranchFilter(\'all\')">All Branches <span class="filter-count">29</span></button>';
            Object.entries(byBranch).sort((a, b) => b[1] - a[1]).forEach(([branch, count]) => {
                branchContainer.innerHTML += `<button class="filter-btn" data-branch="${branch}" onclick="setBranchFilter('${branch}')">${branch} <span class="filter-count">${count}</span></button>`;
            });

            // Country filters
            const countryContainer = document.getElementById('countryFilters');
            countryContainer.innerHTML = '<button class="filter-btn active" data-country="all" onclick="setCountryFilter(\'all\')">All Countries <span class="filter-count">29</span></button>';
            Object.entries(byCountry).sort((a, b) => b[1] - a[1]).forEach(([country, count]) => {
                countryContainer.innerHTML += `<button class="filter-btn" data-country="${country}" onclick="setCountryFilter('${country}')">${country} <span class="filter-count">${count}</span></button>`;
            });
        }

        function setTypeFilter(type) {
            currentFilters.type = type;
            document.querySelectorAll('#typeFilters .filter-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.type === type));
            renderItems();
        }

        function setBranchFilter(branch) {
            currentFilters.branch = branch;
            document.querySelectorAll('#branchFilters .filter-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.branch === branch));
            renderItems();
        }

        function setCountryFilter(country) {
            currentFilters.country = country;
            document.querySelectorAll('#countryFilters .filter-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.country === country));
            renderItems();
        }

        function filterItems() {
            currentFilters.search = document.getElementById('searchInput').value.toLowerCase();
            renderItems();
        }

        function setView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.view === view));
            renderItems();
        }

        function getFilteredItems() {
            return allItems.filter(item => {
                if (currentFilters.type !== 'all' && item.type !== currentFilters.type) return false;
                if (currentFilters.branch !== 'all' && item.branch !== currentFilters.branch) return false;
                if (currentFilters.country !== 'all' && item.country !== currentFilters.country) return false;
                if (currentFilters.search && !item.title.toLowerCase().includes(currentFilters.search) && !item.unit_name.toLowerCase().includes(currentFilters.search)) return false;
                return true;
            });
        }

        function renderItems() {
            const filtered = getFilteredItems();
            const container = document.getElementById('contentContainer');
            document.getElementById('resultsCount').textContent = `Showing ${filtered.length} items`;

            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">&#128269;</div>
                        <div class="empty-state-title">No items found</div>
                        <div class="empty-state-text">Try adjusting your filters or search terms</div>
                    </div>
                `;
                return;
            }

            // Group by country
            const grouped = {};
            filtered.forEach(item => {
                if (!grouped[item.country]) grouped[item.country] = [];
                grouped[item.country].push(item);
            });

            // Sort countries by item count
            const sortedCountries = Object.keys(grouped).sort((a, b) => grouped[b].length - grouped[a].length);

            let html = '';
            sortedCountries.forEach(country => {
                const items = grouped[country];
                const region = regionMap[country] || 'Other';

                html += `
                    <div class="location-group">
                        <div class="location-header">
                            <span class="region-badge">${region}</span>
                            <span class="location-name">${country}</span>
                            <span class="location-count">${items.length} item${items.length > 1 ? 's' : ''}</span>
                        </div>
                `;

                if (currentView === 'grid') {
                    html += '<div class="items-grid">';
                    items.forEach(item => {
                        html += `
                            <div class="item-card ${item.type}" onclick="showDetail('${item.id}')">
                                ${item.thumbnail_url ? `<img class="item-thumbnail" src="${item.thumbnail_url}" alt="" loading="lazy" onerror="this.style.display='none'">` : ''}
                                <div class="item-content">
                                    <div class="item-meta">
                                        <span class="item-type ${item.type}">${item.type}</span>
                                        <span class="item-branch">${item.branch}</span>
                                    </div>
                                    <div class="item-title">${item.title}</div>
                                    <div class="item-description">${item.description || ''}</div>
                                    <div class="item-footer">
                                        <span class="item-unit">${item.unit_name}</span>
                                        <span class="item-date">${item.date_published}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    html += '</div>';
                } else {
                    html += '<div class="items-list">';
                    items.forEach(item => {
                        html += `
                            <div class="item-row ${item.type}" onclick="showDetail('${item.id}')">
                                <div class="item-row-type">
                                    <span class="item-type ${item.type}">${item.type}</span>
                                </div>
                                <div class="item-row-main">
                                    <div class="item-row-title">${item.title}</div>
                                    <div class="item-row-unit">${item.unit_name}</div>
                                </div>
                                <div class="item-row-meta">
                                    <div class="item-row-branch">${item.branch}</div>
                                    <div class="item-row-date">${item.date_published}</div>
                                </div>
                            </div>
                        `;
                    });
                    html += '</div>';
                }

                html += '</div>';
            });

            container.innerHTML = html;
        }

        function showDetail(itemId) {
            const item = allItems.find(i => i.id === itemId);
            if (!item) return;

            document.getElementById('modalTitle').textContent = item.title;
            document.getElementById('modalLink').href = item.url;

            let bodyHtml = '';

            if (item.thumbnail_url) {
                bodyHtml += `<img class="modal-image" src="${item.thumbnail_url}" alt="">`;
            }

            bodyHtml += `
                <div class="modal-meta">
                    <span class="modal-tag type">${item.type}</span>
                    <span class="modal-tag branch">${item.branch}</span>
                    <span class="modal-tag location">${item.location_display}</span>
                </div>
            `;

            if (item.description) {
                bodyHtml += `<div class="modal-description">${item.description}</div>`;
            }

            bodyHtml += `
                <div class="modal-info">
                    <div class="modal-info-item">
                        <div class="modal-info-label">Unit</div>
                        <div class="modal-info-value">${item.unit_name}</div>
                    </div>
                    <div class="modal-info-item">
                        <div class="modal-info-label">Published</div>
                        <div class="modal-info-value">${item.date_published}</div>
                    </div>
                    ${item.credit ? `<div class="modal-info-item"><div class="modal-info-label">Credit</div><div class="modal-info-value">${item.credit}</div></div>` : ''}
                    ${item.duration ? `<div class="modal-info-item"><div class="modal-info-label">Duration</div><div class="modal-info-value">${item.duration}</div></div>` : ''}
                </div>
            `;

            document.getElementById('modalBody').innerHTML = bodyHtml;
            document.getElementById('detailModal').classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target !== event.currentTarget) return;
            document.getElementById('detailModal').classList.remove('visible');
            document.body.style.overflow = '';
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') closeModal();
        });

        // Initialize
        initFilters();
        renderItems();
    </script>
</body>
</html>